<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Globetrotter Services API Reference</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .container {
            display: flex;
            flex-direction: column;
        }
        .navbar {
            background-color: #6772e5;
            color: white;
            padding: 1rem;
            margin-bottom: 2rem;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .navbar h1 {
            margin: 0;
            font-size: 1.8rem;
        }
        .toc {
            position: sticky;
            top: 20px;
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }
        .toc h5 {
            font-weight: 600;
            margin-bottom: 15px;
        }
        .toc .nav-link {
            padding: 5px 0;
            color: #333;
            transition: color 0.3s ease;
        }
        .toc .nav-link:hover {
            color: #6772e5;
            text-decoration: none;
        }
        .content {
            padding: 0 20px;
        }
        pre {
            background-color: #f6f8fa;
            border-radius: 6px;
            padding: 16px;
            overflow: auto;
        }
        code {
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
            font-size: 14px;
        }
        .method {
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 8px;
        }
        .get {
            background-color: #61affe;
            color: white;
        }
        .post {
            background-color: #49cc90;
            color: white;
        }
        .endpoint {
            padding: 8px;
            border-radius: 4px;
            background-color: #f6f8fa;
            font-family: monospace;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f6f8fa;
        }
        .nav-tabs {
            margin-bottom: 15px;
        }
        .tab-content > .tab-pane {
            display: none;
        }
        .tab-content > .active {
            display: block;
        }
        blockquote {
            border-left: 4px solid #6772e5;
            padding-left: 16px;
            margin-left: 0;
            color: #6d6d6d;
        }
        @media (min-width: 992px) {
            .container {
                flex-direction: row;
            }
            .toc {
                width: 250px;
                margin-right: 30px;
                display: block;
            }
            .content {
                flex-grow: 1;
            }
        }
        
        @media (max-width: 991px) {
            .toc {
                width: 100%;
                margin-bottom: 30px;
                border: 1px solid #e9ecef;
            }
            #toc-toggle {
                font-size: 0.9rem;
                padding: 5px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <h1>Globetrotter Services API Reference</h1>
        <button id="toc-toggle" class="btn btn-light d-lg-none">
            <span id="toc-toggle-text">Show Table of Contents</span>
        </button>
    </div>
    
    <div class="container">
        <div class="toc d-none d-lg-block">
            <h5>Table of Contents</h5>
            <nav id="toc-nav">
                <ul class="nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#authentication">Authentication</a></li>
                    <li class="nav-item"><a class="nav-link" href="#health-check">Health Check</a></li>
                    <li class="nav-item"><a class="nav-link" href="#openai-integration">OpenAI Integration</a></li>
                    <li class="nav-item"><a class="nav-link" href="#travel-services">Travel Services</a></li>
                    <li class="nav-item"><a class="nav-link" href="#natural-language-flight-search">Natural Language Flight Search</a></li>
                    <li class="nav-item"><a class="nav-link" href="#errors">Errors</a></li>
                    <li class="nav-item"><a class="nav-link" href="#rate-limits">Rate Limits</a></li>
                </ul>
            </nav>
        </div>

        <div class="content">
            <div class="introduction">
                <p>Welcome to the Globetrotter Services API! You can use our API to access all endpoints, which can help you integrate travel information and AI capabilities into your applications.</p>
                <p>We have language bindings in Shell and JavaScript! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>
            </div>

            <section id="authentication">
                <h2>Authentication</h2>
                <p>Globetrotter Services uses API keys to authenticate requests. You can view and manage your API keys in the Globetrotter Services Dashboard.</p>
                <p>Authentication to the API is performed via Bearer Authentication. Provide your API key as the bearer token value.</p>
                <p>All API requests must be made over HTTPS. Calls made over plain HTTP will fail. API requests without authentication will also fail.</p>

                <ul class="nav nav-tabs" id="authTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="shell-auth-tab" data-bs-toggle="tab" data-bs-target="#shell-auth" type="button" role="tab" aria-controls="shell-auth" aria-selected="true">Shell</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="javascript-auth-tab" data-bs-toggle="tab" data-bs-target="#javascript-auth" type="button" role="tab" aria-controls="javascript-auth" aria-selected="false">JavaScript</button>
                    </li>
                </ul>
                <div class="tab-content" id="authTabsContent">
                    <div class="tab-pane fade show active" id="shell-auth" role="tabpanel" aria-labelledby="shell-auth-tab">
                        <pre><code class="language-bash"># With shell, you can just pass the correct header with each request
curl "https://api.globetrotter-services.com/openai/completion" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{"prompt": "Your prompt here"}'</code></pre>
                    </div>
                    <div class="tab-pane fade" id="javascript-auth" role="tabpanel" aria-labelledby="javascript-auth-tab">
                        <pre><code class="language-javascript">// Using fetch with JavaScript
fetch('https://api.globetrotter-services.com/openai/completion', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    prompt: 'Your prompt here'
  })
})
.then(response => response.json())
.then(data => console.log(data));</code></pre>
                    </div>
                </div>

                <blockquote>
                    <p>Make sure to replace <code>YOUR_API_KEY</code> with your actual API key.</p>
                </blockquote>
            </section>

            <section id="health-check">
                <h2>Health Check</h2>
                <h3>Endpoint Health</h3>
                <div class="endpoint">
                    <span class="method get">GET</span> <code>/common/health</code>
                </div>
                <p>This endpoint provides basic health status of the API service.</p>

                <h4>Response</h4>
                <pre><code class="language-json">"UP"</code></pre>
                <p>The API returns a simple "UP" response to indicate the service is running properly.</p>
            </section>

            <section id="openai-integration">
                <h2>OpenAI Integration</h2>
                <h3>Generate Completion</h3>
                <div class="endpoint">
                    <span class="method post">POST</span> <code>/openai/completion</code>
                </div>
                <p>This endpoint sends your prompt to OpenAI and returns the completion response.</p>

                <h4>Request Parameters</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Required</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>prompt</td>
                            <td>string</td>
                            <td>Yes</td>
                            <td>The text prompt to send to OpenAI</td>
                        </tr>
                        <tr>
                            <td>maxTokens</td>
                            <td>integer</td>
                            <td>No</td>
                            <td>Maximum number of tokens to generate (default: 100)</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Example Request</h4>
                <pre><code class="language-json">{
  "prompt": "Write a poem about travel",
  "maxTokens": 150
}</code></pre>

                <h4>Response</h4>
                <p>A successful request returns the raw JSON response from OpenAI's Completion API.</p>
                <pre><code class="language-json">{
  "id": "cmpl-uqkvlQyYK7bGYrRHQ0eXlWi7",
  "object": "text_completion",
  "created": 1689818628,
  "model": "gpt-3.5-turbo-instruct",
  "choices": [
    {
      "text": "Wanderlust pulls at my heart,\nA desire to journey, to depart.\nNew horizons call my name,\nAdventures that set my soul aflame...",
      "index": 0,
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 5,
    "completion_tokens": 42,
    "total_tokens": 47
  }
}</code></pre>

                <h4>Error Responses</h4>
                <p>The API may return various error responses depending on the issue:</p>

                <p><strong>Missing API Key</strong></p>
                <pre><code class="language-json">{
  "error": "OpenAI API key is missing."
}</code></pre>

                <p><strong>Quota Exceeded</strong></p>
                <pre><code class="language-json">{
  "error": {
    "message": "You exceeded your current quota, please check your plan and billing details.",
    "type": "insufficient_quota",
    "param": null,
    "code": "insufficient_quota"
  }
}</code></pre>
            </section>

            <section id="travel-services">
                <h2>Travel Services</h2>
                <h3>Search Flights</h3>
                <div class="endpoint">
                    <span class="method get">GET</span> <code>/travel/flights</code>
                </div>
                <p>This endpoint retrieves flight information based on origin, destination, and date.</p>

                <h4>Query Parameters</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Required</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>from</td>
                            <td>string</td>
                            <td>Yes</td>
                            <td>Origin airport code (e.g., "SFO")</td>
                        </tr>
                        <tr>
                            <td>to</td>
                            <td>string</td>
                            <td>Yes</td>
                            <td>Destination airport code (e.g., "JFK")</td>
                        </tr>
                        <tr>
                            <td>date</td>
                            <td>string</td>
                            <td>Yes</td>
                            <td>Flight date in ISO 8601 format (YYYY-MM-DD)</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Example Request</h4>
                <pre><code>GET /travel/flights?from=SFO&to=JFK&date=2025-07-15</code></pre>

                <h4>Response</h4>
                <pre><code class="language-json">{
  "data": [
    {
      "type": "flight-offer",
      "id": "1",
      "source": "GDS",
      "instantTicketingRequired": false,
      "nonHomogeneous": false,
      "oneWay": false,
      "lastTicketingDate": "2025-06-15",
      "itineraries": [
        {
          "duration": "PT6H10M",
          "segments": [
            {
              "departure": {
                "iataCode": "SFO",
                "terminal": "2",
                "at": "2025-07-15T08:00:00"
              },
              "arrival": {
                "iataCode": "JFK",
                "terminal": "4",
                "at": "2025-07-15T16:10:00"
              },
              "carrierCode": "DL",
              "number": "586",
              "aircraft": {
                "code": "76W"
              },
              "operating": {
                "carrierCode": "DL"
              },
              "duration": "PT6H10M",
              "id": "1",
              "numberOfStops": 0
            }
          ]
        }
      ],
      "price": {
        "currency": "USD",
        "total": "325.94",
        "base": "250.00",
        "fees": [
          {
            "amount": "0.00",
            "type": "SUPPLIER"
          },
          {
            "amount": "0.00",
            "type": "TICKETING"
          }
        ],
        "grandTotal": "325.94"
      }
    }
  ]
}</code></pre>
            </section>

            <section id="natural-language-flight-search">
                <h2>Natural Language Flight Search</h2>
                <h3>Extract Flight Search Parameters</h3>
                <p>This endpoint is not directly exposed but is used internally by the OpenAI service. It extracts flight search parameters from natural language text.</p>

                <h4>Example input:</h4>
                <pre><code>"I need a flight from San Francisco to New York on July 15, 2025 for 2 people in business class"</code></pre>

                <h4>Processed output (converted to a FlightSearchRequest object):</h4>
                <pre><code class="language-json">{
  "from": "SFO",
  "to": "JFK",
  "fromDate": "2025-07-15",
  "toDate": null,
  "numberOfPassengers": 2,
  "travelClass": "BUSINESS"
}</code></pre>
            </section>

            <section id="errors">
                <h2>Errors</h2>
                <p>The Globetrotter Services API uses conventional HTTP response codes to indicate the success or failure of an API request.</p>

                <table>
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>200 - OK</td>
                            <td>Everything worked as expected</td>
                        </tr>
                        <tr>
                            <td>400 - Bad Request</td>
                            <td>The request was unacceptable, often due to missing a required parameter</td>
                        </tr>
                        <tr>
                            <td>401 - Unauthorized</td>
                            <td>No valid API key provided</td>
                        </tr>
                        <tr>
                            <td>403 - Forbidden</td>
                            <td>The API key doesn't have permissions to perform the request</td>
                        </tr>
                        <tr>
                            <td>404 - Not Found</td>
                            <td>The requested resource doesn't exist</td>
                        </tr>
                        <tr>
                            <td>429 - Too Many Requests</td>
                            <td>Too many requests hit the API too quickly</td>
                        </tr>
                        <tr>
                            <td>500, 502, 503, 504 - Server Errors</td>
                            <td>Something went wrong on the server</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section id="rate-limits">
                <h2>Rate Limits</h2>
                <p>The API has rate limits to prevent abuse. Rate limits are applied on a per-API key basis.</p>
                <p>If you exceed the rate limits, you'll receive a 429 Too Many Requests response.</p>
            </section>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize syntax highlighting
            hljs.highlightAll();
            
            // Initialize Bootstrap tabs
            const tabElements = document.querySelectorAll('[data-bs-toggle="tab"]');
            tabElements.forEach(tab => {
                tab.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('data-bs-target'));
                    // Hide all tab panes in the same tab content
                    const parent = target.parentElement;
                    parent.querySelectorAll('.tab-pane').forEach(pane => {
                        pane.classList.remove('show', 'active');
                    });
                    // Show the selected tab pane
                    target.classList.add('show', 'active');
                    // Update tab active state
                    const tabContainer = this.closest('.nav-tabs');
                    tabContainer.querySelectorAll('.nav-link').forEach(navLink => {
                        navLink.classList.remove('active');
                        navLink.setAttribute('aria-selected', 'false');
                    });
                    this.classList.add('active');
                    this.setAttribute('aria-selected', 'true');
                });
            });
            
            // Toggle Table of Contents for mobile devices
            const tocToggleBtn = document.getElementById('toc-toggle');
            const tocElement = document.querySelector('.toc');
            const tocToggleText = document.getElementById('toc-toggle-text');
            
            if (tocToggleBtn) {
                tocToggleBtn.addEventListener('click', () => {
                    if (tocElement.classList.contains('d-none')) {
                        // Show TOC
                        tocElement.classList.remove('d-none');
                        tocElement.classList.add('d-block');
                        tocToggleText.textContent = 'Hide Table of Contents';
                    } else {
                        // Hide TOC
                        tocElement.classList.remove('d-block');
                        tocElement.classList.add('d-none');
                        tocToggleText.textContent = 'Show Table of Contents';
                    }
                });
            }
            
            // Smooth scrolling for navigation links
            document.querySelectorAll('#toc-nav a').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const target = document.querySelector(targetId);
                    if (target) {
                        window.scrollTo({
                            top: target.offsetTop - 20,
                            behavior: 'smooth'
                        });
                        
                        // Hide TOC on mobile after clicking a link
                        if (window.innerWidth < 992 && tocElement && !tocElement.classList.contains('d-none')) {
                            tocElement.classList.remove('d-block');
                            tocElement.classList.add('d-none');
                            if (tocToggleText) {
                                tocToggleText.textContent = 'Show Table of Contents';
                            }
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>
